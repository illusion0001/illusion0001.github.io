<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>illusion's Blog | Non MLAA Bug Fixes for The Last of Us (RPCS3)</title>
  
  <link rel="stylesheet" href="/assets/css/main.css" />
  <link rel="stylesheet" href="/assets/css/post.css" />
  <link rel="stylesheet" href="/assets/css/syntax.css" />
  
  <link rel="stylesheet" href="/assets/css/common.css" />
  <script src="/assets/js/categories.js"></script>
  
  <script defer src="/assets/js/lbox.js"></script>
  
  <!-- Twemoji -->
  <!-- src https://github.com/SebastianAigner/twemoji-amazing -->
  <link rel="stylesheet" href="/assets/css/twemoji-amazing.css">
</head>

  <body>
    <main class="blogfeed">
      
<header>
  <a class="site-title article-page" href="/">illusion's Blog</a>
</header>




      <section id="social-links1">
  
    <a href="/contact" target="_blank"> Contact</a>
  
    <a href="/patch" target="_blank"> Patches</a>
  
</section>

<section id="social-links">

  <a href="https://github.com/illusion0001" target="_blank">
    <img src="/assets/icons/github.svg" alt="" />
  </a>

  <a href="mailto:illusion3185@gmail.com" target="_blank">
    <img src="/assets/icons/email.svg" alt="" />
  </a>

</section>

      <section id="article">
        
        <!--  -->
        
        <!--  -->
        
        
        <div
          class="article-thumbnail"
          style="
            background-image: url('https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/t1-ps3-thumbnail.png');
          "
        >
        
          <h1 class="article-title">Non MLAA Bug Fixes for The Last of Us (RPCS3)</h1>
          <div class="article-bottom">
            <small class="article-date">25 Jun 2021</small>
            <div class="article-categories">
              
              <a href="#!" class="article-category">patches</a>
              
            </div>
          </div>
        </div>
        <div class="article-content"><p>Please be aware that the patch has already been released since October of 2020. This article covers the making of the patch.</p>

<hr />

<h1 id="intro">Intro</h1>

<p>Back in August - October 2020, I got curious to see if I could fix some of the bugs introduced with the MLAA Patch for Naughty Dog Games on the <a href="https://rpcs3.net/">RPCS3</a> Emulator.</p>

<p>This allowed for a number of benefits for instances, resolution upscaling and overall faster performance.</p>

<p>But it also has a few disadvantages such as:</p>

<ul>
  <li>
    <p>Overbloom and Black screen in some parts of the game.</p>
  </li>
  <li>
    <p>Crashes during some subchapters rendering the game completely unplayable.</p>
  </li>
</ul>

<p>So I asked my friend, <a href="https://www.youtube.com/user/ZEROx2085/">ZEROx</a> to help out and not only did we succeeded in our goal, we mananged to improve the game overall and resolve some emulator bugs in the process. Although the crashes are actually a real bug.</p>

<p>Things we wanted to improve upon:</p>

<div align="center" class="">
  <a href="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/t1-ps3-pre-mlaa-0.png">
  <img src="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/t1-ps3-pre-mlaa-0.png" />
</a></div>

<div align="center">
<em>Overbloom: Menu</em>
</div>

<div align="center" class="">
  <a href="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/t1-ps3-pre-mlaa-1.png">
  <img src="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/t1-ps3-pre-mlaa-1.png" />
</a></div>

<div align="center">
<em>Overbloom: In-Game</em>
</div>

<div align="center" class="">
  <a href="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/t1-ps3-pre-mlaa-2.png">
  <img src="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/t1-ps3-pre-mlaa-2.png" />
</a></div>

<div align="center">
<em>Rainbow aiming reticles</em>
</div>

<div align="center" class="">
  <a href="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/t1-ps3-pre-mlaa-3.png">
  <img src="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/t1-ps3-pre-mlaa-3.png" />
</a></div>

<div align="center">
<em>Grahpical issues; This place has seen better days.</em>
</div>

<div align="center" class="">
  <a href="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/t1-ps3-pre-mlaa-4.png">
  <img src="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/t1-ps3-pre-mlaa-4.png" />
</a></div>

<div align="center">
<em>SPU Access Violation; This happens after a few minutes</em>
</div>

<h2 id="research">Research</h2>

<p><code class="language-plaintext highlighter-rouge">0x12C41A4</code> I found this memory address when I was searching for Field of View. Selecting a bunch of 1.00s (<code class="language-plaintext highlighter-rouge">3F 80 00 00</code>) and setting them to 0.50 (<code class="language-plaintext highlighter-rouge">3F 00 00 00</code>).</p>

<p>What does it do you may ask?</p>

<div align="center" class="">
  <a href="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/t1-ps3-float-0.png">
  <img src="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/t1-ps3-float-0.png" />
</a></div>

<div align="center">
<em>0x12C41A4: 1.00</em>
</div>

<div align="center" class="">
  <a href="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/t1-ps3-float-1.png">
  <img src="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/t1-ps3-float-1.png" />
</a></div>

<div align="center">
<em>0x12C41A4: 0.50</em>
</div>

<p>It seems like this adjust sun’s position, brightness and <strong>other</strong> things.. there has to be more to this. let’s try Financial District - one of the subchapters in the game.</p>

<div align="center">
<video width="100%" controls="">
  <source src="https://cdn.discordapp.com/attachments/650395105479360514/857087338245259264/t1-ps3-crash-demo.webm" type="video/webm" />
</video>
<em>Timelaspe video showing float value adjusted.</em>
</div>

<p><a href="https://youtu.be/beM6J7mVIeQ">Full Video</a></p>

<p>Welp, it didn’t crash. Let’s try increasing the value.</p>

<div align="center" class="">
  <a href="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/t1-ps3-float-2.png">
  <img src="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/t1-ps3-float-2.png" />
</a></div>

<div align="center">
<em>0x12C41A4: 0.75 It crashed after a few minutes</em>
</div>

<p>I guess 0.50 worked. Interesting.</p>

<h2 id="part-1---bloom-fix">Part 1 - Bloom Fix</h2>

<p><code class="language-plaintext highlighter-rouge">0x12C41A4</code> is the base multiplier for many of the game’s graphics variable. Introduced in Uncharted 3 and onwards.</p>

<p>Altering this value will also alter the values in the higher range of the game memory.</p>

<p>So I then passed this off to <a href="https://www.youtube.com/user/ZEROx2085/">ZEROx</a> and he discovered the area where the values are located.</p>

<div align="center" class="">
  <a href="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/t1-ps3-ce-1.png">
  <img src="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/t1-ps3-ce-1.png" />
</a></div>

<div align="center">
<em>Base multipliers in high region of memory</em>
</div>

<p>We now have fine control over the float values, meaning we can tweak the individual values to our liking.</p>

<p>As an example: <code class="language-plaintext highlighter-rouge">3F 80 00 00 01 31 89 E8 01 50 E1 98</code> This affects Bloom Glow.</p>

<div align="center" class="">
  <a href="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/t1-ps3-mlaa-wip-0.png">
  <img src="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/t1-ps3-mlaa-wip-0.png" />
</a></div>

<div align="center">
<em>Bloom Glow 1.00 (Non PostOnSpu Path)</em>
</div>

<div align="center" class="">
  <a href="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/t1-ps3-mlaa-wip-1.png">
  <img src="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/t1-ps3-mlaa-wip-1.png" />
</a></div>

<div align="center">
<em>Bloom Glow 0.00 (Non PostOnSpu Path)</em>
</div>

<p>With adjustments to the float, we are left with a similar glow seen in the MLAA Path.</p>

<div align="center" class="">
  <a href="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/t1-ps3-post-mlaa-2.png">
  <img src="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/t1-ps3-post-mlaa-2.png" />
</a></div>

<div align="center">
<em>Bloom Values Adjusted; RPCS3 Screenshot. (Non PostOnSpu Path)</em>
</div>

<div align="center" class="">
  <a href="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/t1-ps3-post-mlaa-1.png">
  <img src="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/t1-ps3-post-mlaa-1.png" />
</a></div>

<div align="center">
<em>PlayStation 3 Screenshot. (PostOnSpu Path)</em>
</div>

<p>Remember the pattern above? <code class="language-plaintext highlighter-rouge">01 50 E1 98</code> this looks like a memory address.</p>

<div align="center" class="">
  <a href="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/t1-ps3-ce-2.png">
  <img src="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/t1-ps3-ce-2.png" />
</a></div>

<p><a href="https://www.youtube.com/user/ZEROx2085/">ZEROx</a> came to the rescue and made a list of values used throughout the game.</p>

<p>The columns belows contains memmory address and their float values loaded in sections of the game.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Non-MLAA (Post on SPU) path bloom values:
Item:                         e190     e194   e198      e19c     e1a0     e1a4    e1a8    e1ac   Fog-e610
Menu:                         1.103    1.1    0         0.8      0.3      1.7     0       2.2    0
...
The Cargo:                    0.2      1.602 -0.0315    0.8      0.1      1.6     0       2.4    0
Pre-Ellie:                    0.2      1.402 -0.0015    0.8      0.2      1.5     0       1.5    0
...
Bills intro:                  2.244    1.68   0.02      1.1      0.05     1.9     0       2.11   0
Bills offroad:                1.4499   1.08   0.02      0.93     0.05     1.9     0       2.11   0
Bills forest:                 1.649    0.98   0.02      1        0.05     1.9     0       2      0
Bills town:                   0.5495   2.6    0.02      1.05     0        1.8     0       2      0
Bills inside building:        0.5495   2      0.02      1.05     0        1.8     0       2      0
Bills music shop:             1.7196   2      0.02      1.05     0        1.8     0       2      0
Bills on the roof:            0.5495   2.6    0.02      1.13     0        1.8     0       2      0
Bills Trap:                   0.78     2.951  0.02      1.28     0        1.9     0       2      0
Bills Trap escape:            0.48     2.951  0.02      1.28     0        1.9     0       2      0
...
Ending:                       1.1      1.1    0         0.75     0.302    1.7     0       2.3    0
</code></pre></div></div>

<p>Since it would be too long to show the entire patchcodes (Over 40 lines!)</p>

<p>Here’s a quick rundown:</p>

<p>The patch only covers 3 problematic places: Main Menu, Bill’s Town and Ending.</p>

<p>It compares floats as 4 bytes hex with certain values which are unique for those levels.</p>

<p>For example, this is the snippet of code for main menu bloom patch.</p>

<div class="language-yml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="c1"># Bloom correction patch</span>
    <span class="pi">-</span> <span class="pi">[</span> <span class="nv">be32</span><span class="pi">,</span> <span class="nv">0x00a803a8</span><span class="pi">,</span> <span class="nv">0x2f840000</span> <span class="pi">]</span> <span class="c1">#if r4 &lt;= 0</span>
    <span class="pi">-</span> <span class="pi">[</span> <span class="nv">be32</span><span class="pi">,</span> <span class="nv">0x00a803ac</span><span class="pi">,</span> <span class="nv">0x409d0058</span> <span class="pi">]</span> <span class="c1">#Skip to Main menu</span>
  <span class="c1"># Patch Menu/Ending level</span>
    <span class="pi">-</span> <span class="pi">[</span> <span class="nv">be32</span><span class="pi">,</span> <span class="nv">0x00a80404</span><span class="pi">,</span> <span class="nv">0x808909a0</span> <span class="pi">]</span> <span class="c1">#r4 unique value e190</span>
    <span class="pi">-</span> <span class="pi">[</span> <span class="nv">be32</span><span class="pi">,</span> <span class="nv">0x00a80408</span><span class="pi">,</span> <span class="nv">0x3ca03f8d</span> <span class="pi">]</span> <span class="c1">#r5 = 3f8d0000</span>
    <span class="pi">-</span> <span class="pi">[</span> <span class="nv">be32</span><span class="pi">,</span> <span class="nv">0x00a8040c</span><span class="pi">,</span> <span class="nv">0x38a52f6f</span> <span class="pi">]</span> <span class="c1">#r5 = 3f8d2f6f</span>
    <span class="pi">-</span> <span class="pi">[</span> <span class="nv">be32</span><span class="pi">,</span> <span class="nv">0x00a80410</span><span class="pi">,</span> <span class="nv">0x7f842800</span> <span class="pi">]</span> <span class="c1">#compare r4 to r5</span>
    <span class="pi">-</span> <span class="pi">[</span> <span class="nv">be32</span><span class="pi">,</span> <span class="nv">0x00a80414</span><span class="pi">,</span> <span class="nv">0x419e0010</span> <span class="pi">]</span> <span class="c1">#Patch menu</span>
    <span class="pi">-</span> <span class="pi">[</span> <span class="nv">be32</span><span class="pi">,</span> <span class="nv">0x00a80418</span><span class="pi">,</span> <span class="nv">0x80a909a4</span> <span class="pi">]</span> <span class="c1">#r5 unique value e194</span>
    <span class="pi">-</span> <span class="pi">[</span> <span class="nv">be32</span><span class="pi">,</span> <span class="nv">0x00a8041c</span><span class="pi">,</span> <span class="nv">0x7f842800</span> <span class="pi">]</span> <span class="c1">#compare r4 to r5</span>
    <span class="pi">-</span> <span class="pi">[</span> <span class="nv">be32</span><span class="pi">,</span> <span class="nv">0x00a80420</span><span class="pi">,</span> <span class="nv">0x4c9e0020</span> <span class="pi">]</span> <span class="c1">#Return (bnelr)</span>
  <span class="c1"># Patch function</span>
    <span class="pi">-</span> <span class="pi">[</span> <span class="nv">be32</span><span class="pi">,</span> <span class="nv">0x00a8042c</span><span class="pi">,</span> <span class="nv">0xedad0332</span> <span class="pi">]</span> <span class="c1">#f13=f13*f12</span>
    <span class="pi">-</span> <span class="pi">[</span> <span class="nv">be32</span><span class="pi">,</span> <span class="nv">0x00a80430</span><span class="pi">,</span> <span class="nv">0xec000332</span> <span class="pi">]</span> <span class="c1">#f0=f0*f12</span>
    <span class="pi">-</span> <span class="pi">[</span> <span class="nv">be32</span><span class="pi">,</span> <span class="nv">0x00a80434</span><span class="pi">,</span> <span class="nv">0x4e800020</span> <span class="pi">]</span> <span class="c1">#Return</span>
</code></pre></div></div>

<p>And if it hits one condition it applies coef, its needed for the two values by using fmuls.</p>

<p>(i.e 0.199 * 1.00 and 0.199 * 0.5)</p>

<p>0.199 is the actual float value, multiplied by base: 1.00 which is the default.</p>

<p><code class="language-plaintext highlighter-rouge">0x150E198</code> must be 0, doesn’t matter if its positive or negative values. It affects bloom glow and negative values seen in The Cargo subchapter, which causes a black screen.</p>

<p><code class="language-plaintext highlighter-rouge">0x150E1A0</code> must be 0, this affects aiming reticles.</p>

<div align="center" class="">
  <a href="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/t1-ps3-post-mlaa-0.png">
  <img src="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/t1-ps3-post-mlaa-0.png" />
</a></div>

<div align="center">
<em>Spot any difference?</em>
</div>

<p>Now, we have a crash to burn.</p>

<h2 id="part-2---crash-fix">Part 2 - Crash Fix</h2>

<div align="center" class="">
  <a href="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/SPU_PPU_Meme00.png">
  <img src="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/SPU_PPU_Meme00.png" />
</a></div>

<p>So I went searching for the floats.</p>

<p><code class="language-plaintext highlighter-rouge">3F 80 00 00 01 31 89 E8 01 50 E0 E0</code></p>

<p>This seem to stop the crash when lowering the value to 0.5 (3F 00 00 00)</p>

<div align="center" class="">
  <a href="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/t1-ps3-ce-3.png">
  <img src="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/t1-ps3-ce-3.png" />
</a></div>

<div align="center">
<em>Value cannot be edited here</em>
</div>

<p>Breakpoint leads to here.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>0095b8ec c1 a9 08 f0     lfs        f13,0x8f0(param_7)=&gt;DAT_0150e0e0
0095b8f0 c0 1e 80 8c     lfs        f0,-0x7f74(r30)=&gt;DAT_012bec38 = 3F000000h
0095b8f4 ff 8d 00 00     fcmpu      cr7,f13,f0
0095b8f8 40 9d 00 2c     ble        cr7,LAB_0095b924
                LAB_0095b924
0095b924 eb c1 ff f0     ld         r30,local_10(r1)
0095b928 4e 80 00 20     blr
</code></pre></div></div>

<p>It looks like it compares against float at <code class="language-plaintext highlighter-rouge">0x12bec38</code> and branches to <code class="language-plaintext highlighter-rouge">0x95b924</code> when it meet its condition.</p>

<p>An easy patch here is to make it branch regardless of its condition check.</p>

<p>The result is crashing fixed during the following sections.</p>

<ul>
  <li>
    <p>Financial District</p>
  </li>
  <li>
    <p>Escape the City</p>
  </li>
  <li>
    <p>Go Big Horns</p>
  </li>
</ul>

<div align="center" class="">
  <a href="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/t1-ps3-irl.png">
  <img src="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/t1-ps3-irl.png" />
</a></div>

<div align="center">
<em>October 2020 - On Vacation and fixing bugs</em>
</div>

<h2 id="part-3---cabin-resort-fix">Part 3 - Cabin Resort Fix</h2>

<p><a href="https://www.youtube.com/user/ZEROx2085/">ZEROx</a> hunted down one more crash.</p>

<p>This subchapter will cause crashing if Runtime Lighting is set to GPU Lighting, one of the lighting path available in the game.</p>

<div align="center" class="">
  <a href="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/t1-ps4-dynamic-light-menu.png">
  <img src="https://img-assets.illusion0001.workers.dev/assets/images/t1-ps3-mlaa-fix/t1-ps4-dynamic-light-menu.png" />
</a></div>

<div align="center">
<em>Menu in PlayStation 4 version</em>
</div>

<p><code class="language-plaintext highlighter-rouge">3F 80 00 00 01 31 89 C8 01 50 D7 F0</code> Setting this to 0 fixes the crash.</p>

<p>Breakpoint at <code class="language-plaintext highlighter-rouge">0x150d7f0</code></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>00a7ffa4 80 09 0e 20     lwz        r0,0xe20(param_7)
00a7ffa8 2f 80 00 00     cmpwi      cr7,r0,0x0
00a7ffac 41 9e 01 a4     beq        cr7,LAB_00a80150
</code></pre></div></div>

<p>The same patching method can be used here. Branch regardless of the compare condition.</p>

<h1 id="results">Results</h1>

<div align="center" class="responsive-video-container">
<iframe width="560" height="315" src="https://www.youtube.com/embed/91pHfMeB828" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
</div>

<h1 id="patch">Patch</h1>

<p>Patch was made available back in October 2020. You can download through the emulator built-in Patch Manager.</p>

<div align="center" class="">
  <a href="https://img-assets.illusion0001.workers.dev/assets/images/RatchetPS3-FPSUnlock/rpcs3_patch_example.png">
  <img src="https://img-assets.illusion0001.workers.dev/assets/images/RatchetPS3-FPSUnlock/rpcs3_patch_example.png" />
</a></div>

<h2 id="supporters">Supporters</h2>

<p>Thanks to the patrons who supported me on various platforms! You guys are awesome!</p>

<h3 id="monthly-supporters">Monthly supporters:</h3>
<ul>
  <li>
    <p><a href="https://www.patreon.com/illusion0001">Patreon</a>:</p>

    <ul>
      <li>ac2pic</li>
      <li>Alexa</li>
      <li>Brett</li>
      <li>Ciril</li>
      <li>GarnetSunset</li>
      <li>Mmmmmhno</li>
      <li>Paul</li>
      <li>PlayStation5Mods</li>
      <li>RazzySxPB</li>
      <li>Ryan</li>
      <li>Voredy</li>
      <li>YveltalGriffin</li>
      <li>Zackery</li>
      <li>alessaro92</li>
      <li>ashenC</li>
      <li>embee</li>
      <li>erdosadam24</li>
      <li>faith</li>
      <li>maplemiyazaki</li>
      <li>patrick</li>
      <li>rudi</li>
    </ul>
  </li>
  <li>
    <p><a href="https://github.com/sponsors/illusion0001">Github Sponsors</a>:</p>

    <ul>
      <li>VIPO777</li>
      <li>WardFail</li>
      <li>Whitehawkx</li>
      <li>gorshco</li>
      <li>jrson83</li>
      <li>regal.</li>
      <li>suwagawaki</li>
    </ul>
  </li>
</ul>

</div>
      </section>
      <footer>
  <p>&copy; 2021 - 2025 | illusion's Blog</br>Theme <a href="https://github.com/sharadcodes/jekyll-theme-material-you"> Jekyll Theme Material You</a></p>
</footer>

    </main>
    <section id="category-modal-bg"></section>
<section id="category-modal">
  <h1 id="category-modal-title"></h1>
  <section id="category-modal-content"></section>
</section>

  </body>
</html>
