<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>illusion's Blog | Improved Loading for The Last of Us Remastered</title>
  
  <link rel="stylesheet" href="/assets/css/main.css" />
  <link rel="stylesheet" href="/assets/css/post.css" />
  <link rel="stylesheet" href="/assets/css/syntax.css" />
  
  <link rel="stylesheet" href="/assets/css/common.css" />
  <script src="/assets/js/categories.js"></script>
  
  <script defer src="/assets/js/lbox.js"></script>
  
  <!-- Twemoji -->
  <!-- src https://github.com/SebastianAigner/twemoji-amazing -->
  <link rel="stylesheet" href="/assets/css/twemoji-amazing.css">
</head>

  <body>
    <main class="blogfeed">
      
<header>
  <a class="site-title article-page" href="/">illusion's Blog</a>
</header>




      <section id="social-links1">
  
    <a href="/contact" target="_blank"> Contact</a>
  
    <a href="/patch" target="_blank"> Patches</a>
  
</section>

<section id="social-links">

  <a href="https://github.com/illusion0001" target="_blank">
    <img src="/assets/icons/github.svg" alt="" />
  </a>

  <a href="mailto:illusion3185@gmail.com" target="_blank">
    <img src="/assets/icons/email.svg" alt="" />
  </a>

</section>

      <section id="article">
        
        <!--  -->
        
        <!--  -->
        
        
          <h1 class="article-title">Improved Loading for The Last of Us Remastered</h1>
          <div class="article-bottom">
            <small class="article-date">10 Feb 2021</small>
            <div class="article-categories">
              
              <a href="#!" class="article-category">patches</a>
              
            </div>
          </div>
        </div>
        <div class="article-content"><p><em>TL;DR - if you are not interested in an in-depth overview of how the patch was made, scroll down to the <a href="#patch"><strong>Patch</strong></a> section for a download link.</em></p>

<hr />

<p>Please note that you are required to have a <a href="https://wololo.net/2021/12/14/ps4-how-to-run-the-ps4-9-00-jailbreak-full-guide-with-goldhen-payload/">exploited PlayStation 4</a> console on firmware <strong>9.00</strong> or lower to run the patches mentioned in this article.</p>

<h1 id="curiosity">Curiosity</h1>

<p>It’s been a while since The Last of Us Remastered was released for the PlayStation 4 since then I have been wondering why is the loading so slow when using the 30FPS mode. So I decided to investegate.</p>

<h1 id="intro">Intro</h1>

<p>Normally on Naughty Dog Titles, The developers used adaptive sync and allows the framerate to go completely unlocked and to stream assets faster.</p>

<p>However this is absent from this specific release.</p>

<h2 id="finding-what-causes-loading-to-go-fast">Finding what causes loading to go fast.</h2>

<p>Finding out where this adaptive sync or “Allow Screen Tear” as it’s named in the developer menu came easy.</p>

<p>The Uncharted Collection developed by Bluepoint Games used “Allow Screen Tear” during it’s load screen so searching for Byte <code class="language-plaintext highlighter-rouge">0</code> and <code class="language-plaintext highlighter-rouge">1</code> got me to the address I needed.</p>

<div align="center" class="">
  <a href="https://img-assets.illusion0001.workers.dev/assets/images/t1r-fast-load/ps4ch-uc3-1.png">
  <img src="https://img-assets.illusion0001.workers.dev/assets/images/t1r-fast-load/ps4ch-uc3-1.png" />
</a></div>

<p>Setting this byte to 1 during gameplay allows for Unlocked FPS!</p>

<div align="center" class="">
  <a href="https://img-assets.illusion0001.workers.dev/assets/images/t1r-fast-load/UC3-tear.png">
  <img src="https://img-assets.illusion0001.workers.dev/assets/images/t1r-fast-load/UC3-tear.png" />
</a></div>

<p>Sweet.</p>

<p>During the loading screen another option gets disabled. It’s called Main Draw.</p>

<p>Main Draw draws 3D scene. When Disabled it gives us a black screen. This is used during load screen to reduce rendering load.</p>

<div align="center" class="">
  <a href="https://img-assets.illusion0001.workers.dev/assets/images/t1r-fast-load/T1R-maindraw0.png">
  <img src="https://img-assets.illusion0001.workers.dev/assets/images/t1r-fast-load/T1R-maindraw0.png" />
</a></div>

<p>300+ FPS! Not so exciting huh.</p>

<h2 id="making-it-tick">Making it tick.</h2>

<p>Using Ghidra, I was able to find out where this main draw byte is disabled during load screen</p>

<div align="center" class="">
  <a href="https://img-assets.illusion0001.workers.dev/assets/images/t1r-fast-load/ghidra-maindraw-ref.png">
  <img src="https://img-assets.illusion0001.workers.dev/assets/images/t1r-fast-load/ghidra-maindraw-ref.png" />
</a></div>

<p>Going to 0x647631 gives us what we need.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        00647629 41 c6 87        MOV        byte ptr [R15 + 0x1d8],0x1
                 d8 01 00 
                 00 01
        00647631 c6 80 df        MOV        byte ptr [RAX + 0x6df]=&gt;DAT_0181ae4f,0x0
                 06 00 00 00
</code></pre></div></div>

<p>We can add our screen tear byte and set it to 1. But where?</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        006474eb 0f 8f 47        JG         LAB_00647638
                 01 00 00
~~~
        0064760f 74 27           JZ         LAB_00647638
~~~
        00647631 c6 80 df        MOV        byte ptr [RAX + 0x6df]=&gt;DAT_0181ae4f,0x0
                 06 00 00 00
                             LAB_00647638
        00647638 44 89 f0        MOV        EAX,R14D
        0064763b 48 83 c4 08     ADD        RSP,0x8
        0064763f 5b              POP        RBX
        00647640 41 5e           POP        R14
        00647642 41 5f           POP        R15
        00647644 5d              POP        RBP
        00647645 c3              RET
</code></pre></div></div>

<p>We can add our code to 0x647638 and move the related instructions few bytes forward as well as changing jump address to our new location.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>        006474eb 0f 8f 4e        JG         LAB_0064763f
                 01 00 00
~~~
        0064760f 74 2e           JZ         LAB_0064763f
~~~
        00647631 c6 80 df        MOV        byte ptr [RAX + 0x6df]=&gt;DAT_0181ae4f,0x0
                 06 00 00 00
        00647638 c6 80 30        MOV        byte ptr [RAX + 0x30],=&gt;DAT_0181a7a0,0x1
                 00 00 00 01
                             LAB_0064763f
        0064763f 44 89 f0        MOV        EAX,R14D
        00647642 48 83 c4 08     ADD        RSP,0x8
        00647646 5b              POP        RBX
        00647647 41 5e           POP        R14
        00647649 41 5f           POP        R15
        0064764b 5d              POP        RBP
        0064764c c3              RET
</code></pre></div></div>

<p>Done!</p>

<p>Let’s test this change in game. The following video showcases this change aswell as a timer on screen.</p>

<div align="center" class="responsive-video-container">
<iframe width="560" height="315" src="https://www.youtube.com/embed/tZjIuAdALhE?start=9" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>
</div>

<h1 id="patch">Patch</h1>

<p><a href="https://github.com/GoldHEN/GoldHEN_Patch_Repository/blob/3f8d6875f60c0969d674ed31c3dc1f4ad0619720/patches/xml/TheLastOfUs1-Orbis.xml#L10" class="button" role="button"> Patch Codes</a></p>
</div>
      </section>
      <footer>
  <p>&copy; 2021 - 2025 | illusion's Blog</br>Theme <a href="https://github.com/sharadcodes/jekyll-theme-material-you"> Jekyll Theme Material You</a></p>
</footer>

    </main>
    <section id="category-modal-bg"></section>
<section id="category-modal">
  <h1 id="category-modal-title"></h1>
  <section id="category-modal-content"></section>
</section>

  </body>
</html>
